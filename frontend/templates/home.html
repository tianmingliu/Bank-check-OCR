<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>Upload Your Check</title>
    </head>
    <body>
        <h1 align="center">Deutsche Bank Check Reader</h1>
        <h2 align="center">Upload a Check</h2>

        <form onsubmit="uploadImage();" id="uploadImage">
            <div align="center">
                <input id="file" name="file" type="file" />
                <br>
                <input id="submit" name="submit" value="Upload" type="submit" />
            </div>
        </form>

        <br><br><br>

        <div id='dataDiv' style="display: none;">
            <table align="center" border="1" style="border-collapse: collapse;">
                <tr>
                    <th colspan="5">Extracted Data</th>
                </tr>
                <tr>
                    <th>Field</th>
                    <th>Value</th>
                    <th>PASS/FAIL</th>
                    <th>Reason</th>
                </tr><tr>
                    <td>Account Number</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr><tr>
                    <td>Routing Number</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr><tr>
                    <td>Date</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr><tr>
                    <td>Pay to the Order of</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr><tr>
                    <td>Image Amount</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr><tr>
                    <td>Written Amount</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr><tr>
                    <td>Memo</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr><tr>
                    <td>Signature</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </table>
        </div>
        <!-- <div align="center"><textarea rows="10" style="width: 300px;" id="test" disabled>TEST</textarea></div>
        <br><br><br>
        TODO Add JSON file
        <div align="center"><a href="http://127.0.0.1:5000/field-data">JSON File</a></div> -->
    </body>
    <script>
        function unHide() {
            document.getElementById('dataDiv').style = "";
        }

        function uploadImage() {
            var uploadForm = document.getElementById('uploadImage');

            var request = new XMLHttpRequest();
            //POST to httpbin which returns the POST data as JSON
            request.open('POST', 'https://httpbin.org/post', /* async = */ false);

            var formData = new FormData(document.getElementById('uploadImage'));
            request.send(formData);

            var file = document.getElementById("file").value;
            file = file.substr(12);
            document.getElementById('test').value = file;
            unHide();
        }
    </script>
</html>